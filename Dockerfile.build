FROM alpine

RUN apk -U add alpine-sdk \
 && mkdir /data

WORKDIR /data

COPY main.c /data
RUN gcc -Os -fdata-sections -ffunction-sections -Wl,--gc-sections -static -o docker_pid1_static main.c\
 && strip -s docker_pid1_static

ENTRYPOINT ["/bin/tar", "c", "docker_pid1_static"]
